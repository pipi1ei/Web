!function(t){"function"==typeof define&&define.amd?define("xiri",t):window.Xiri=t()}(function(){function t(){}function e(t){this._callback=t}return t.prototype.Scene=function(t,e,n,i){this._scene=t,this._commands=e,this._feedbacks=n,this._fuzzy_words=i},e.prototype.regist=function(){var e=new XMLHttpRequest;return function n(i){if(!i instanceof t.prototype.Scene)throw new Error("scene type error.");e.open("POST","http://127.0.0.1:44570/postkeyword",!0),e.setRequestHeader("Content-Type","application/json;charset=utf-8");var s=this;s.uuid=+new Date,e.setRequestHeader("uuid",s.uuid),e.send(JSON.stringify(i)),e.onreadystatechange=function(){if(4==this.readyState)return 200!=this.status?void setTimeout(function(){n(i)},1e3):void!function(){var t=new XMLHttpRequest;!function e(){t.open("GET","http://127.0.0.1:44570/getcmd",!0),t.setRequestHeader("uuid",s.uuid),t.send(),t.onreadystatechange=function(){if(4==this.readyState){if(200==this.status&&this.responseText)try{s._callback(JSON.parse(this.responseText))}catch(t){}setTimeout(function(){e()},200)}}}()}()}}}(),e.prototype.syncViewState=function(){var t=new XMLHttpRequest;return function e(n){t.open("POST","http://127.0.0.1:44570/syncviewstate",!0),t.setRequestHeader("Content-Type","application/json;charset=utf-8"),t.send(JSON.stringify(n)),t.onreadystatechange=function(){4==this.readyState&&200!=this.status&&setTimeout(function(){e(n)},1e3)}}}(),e.prototype.syncChannelInfo=function(){var t=new XMLHttpRequest;return function e(n){t.open("POST","http://127.0.0.1:44570/syncchannelinfo",!0),t.setRequestHeader("Content-Type","application/json;charset=utf-8"),t.send(JSON.stringify(n)),t.onreadystatechange=function(){4==this.readyState&&200!=this.status&&setTimeout(function(){e(n)},1e3)}}}(),e.prototype.syncClientInfo=function(){var t=new XMLHttpRequest;return function e(n){t.open("POST","http://127.0.0.1:44570/syncclientinfo",!0),t.setRequestHeader("Content-Type","application/json;charset=utf-8"),t.send(JSON.stringify(n)),t.onreadystatechange=function(){4==this.readyState&&200!=this.status&&setTimeout(function(){e(n)},1e3)}}}(),t.prototype.Listener=e,new t});